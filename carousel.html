<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Carousel</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: transparent; overflow: hidden; }
        
        .carousel-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
        }

        .video-card {
            position: absolute;
            transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: #000;
        }

        .video-card iframe {
            width: 100%;
            height: 100%;
            pointer-events: none; /* Disable interaction for smooth sliding */
        }
        
        /* Specific States */
        .state-left-out {
            transform: translateX(-150%) scale(0.8);
            opacity: 0;
            z-index: 0;
        }
        
        .state-left {
            transform: translateX(-80%) scale(0.85);
            opacity: 0.6;
            z-index: 10;
            filter: grayscale(80%);
        }
        
        .state-center {
            transform: translateX(0) scale(1.2);
            opacity: 1;
            z-index: 20;
            box-shadow: 0 20px 50px rgba(59, 130, 246, 0.3); /* Blue glow */
            border: 2px solid rgba(59, 130, 246, 0.5);
            filter: grayscale(0%);
        }
        
        .state-right {
            transform: translateX(80%) scale(0.85);
            opacity: 0.6;
            z-index: 10;
            filter: grayscale(80%);
        }

        .state-right-in {
            transform: translateX(150%) scale(0.8);
            opacity: 0;
            z-index: 0;
        }

    </style>
</head>
<body class="flex items-center justify-center">

    <div class="carousel-container" id="carousel">
        <!-- Videos will be injected here by JS -->
    </div>

    <script>
        // তোমার প্লেলিস্টের ভিডিও আইডিগুলো এখানে পর পর বসাবে
        const videoIds = [
            "M7lc1UVf-VE", // Example ID 1 - Replace with yours
            "ScMzIvxBSi4", // Example ID 2 - Replace with yours
            "tgbNymZ7vqY", // Example ID 3 - Replace with yours
            "lJIrF4YjHfQ", // Example ID 4 - Replace with yours
            "9bZkp7q19f0"  // Example ID 5 - Replace with yours
        ];

        let currentIndex = 0;
        const container = document.getElementById('carousel');
        const cardWidth = 480; // Base width
        const cardHeight = 270; // Base height

        // Create initial DOM elements
        // We need 5 visible/active slots for the animation logic (Out-Left, Left, Center, Right, In-Right)
        let activeCards = [];

        function createCard(id, state) {
            const div = document.createElement('div');
            div.className = `video-card ${state}`;
            div.style.width = `${cardWidth}px`;
            div.style.height = `${cardHeight}px`;
            
            // Using YouTube Embed with controls=0 for cleaner look
            div.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1&mute=1&controls=0&loop=1&playlist=${id}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>`;
            
            return div;
        }

        function initCarousel() {
            // Initial render: We need items at indices: current-1, current, current+1
            // But to handle entrance/exit, we maintain a virtual window
            updateCarousel();
            
            // Start Loop
            setInterval(() => {
                moveNext();
            }, 5000); // 5 Seconds stay
        }

        function getRelativeIndex(offset) {
            let index = (currentIndex + offset) % videoIds.length;
            if (index < 0) index += videoIds.length;
            return index;
        }

        function updateCarousel() {
            container.innerHTML = '';
            
            // Calculate indices for 4 positions: Left, Center, Right, Next-Right (Hidden waiting to enter)
            // Actually animation defines:
            // Existing Left -> Moves Out
            // Existing Center -> Moves Left
            // Existing Right -> Moves Center
            // New -> Moves to Right
            
            // Render static state for the "stay" period
            const leftIdx = getRelativeIndex(-1);
            const centerIdx = getRelativeIndex(0);
            const rightIdx = getRelativeIndex(1);
            
            const leftCard = createCard(videoIds[leftIdx], 'state-left');
            const centerCard = createCard(videoIds[centerIdx], 'state-center');
            const rightCard = createCard(videoIds[rightIdx], 'state-right');

            container.appendChild(leftCard);
            container.appendChild(centerCard);
            container.appendChild(rightCard);
        }

        // Logic for smooth transition
        // Instead of clearing innerHTML, we should manipulate classes on existing elements for smoothness
        // But for simplicity in this pure JS version without a framework, let's try a class-swapping approach with a fixed pool of elements if possible, 
        // OR simply recreate them (might flicker). 
        // BETTER APPROACH: Maintain DOM elements.

        let cardsDOM = [];

        function buildInitialDOM() {
            container.innerHTML = '';
            // Create a card for every video (if list is short) or a pool.
            // Let's create a card for EACH video in the list to keep it simple and just animate classes.
            videoIds.forEach((id, index) => {
                const card = createCard(id, 'state-right-in'); // Start all hidden to right
                card.dataset.index = index;
                container.appendChild(card);
                cardsDOM.push(card);
            });
            updateClasses();
        }

        function updateClasses() {
            // Determine who is where based on currentIndex
            const total = videoIds.length;
            
            const centerI = currentIndex;
            const leftI = (currentIndex - 1 + total) % total;
            const rightI = (currentIndex + 1) % total;
            const leftOutI = (currentIndex - 2 + total) % total;
            const rightInI = (currentIndex + 2) % total;

            cardsDOM.forEach((card, i) => {
                // Reset classes
                card.className = 'video-card';
                
                if (i === centerI) {
                    card.classList.add('state-center');
                } else if (i === leftI) {
                    card.classList.add('state-left');
                } else if (i === rightI) {
                    card.classList.add('state-right');
                } else if (i === leftOutI) {
                    // Just went out
                    card.classList.add('state-left-out');
                } else {
                    // Everyone else is waiting on the right or invisible
                    card.classList.add('state-right-in'); 
                }
            });
        }

        function moveNext() {
            currentIndex = (currentIndex + 1) % videoIds.length;
            updateClasses();
        }

        // Initialize
        buildInitialDOM();
        setInterval(moveNext, 5000);

    </script>
</body>
</html>