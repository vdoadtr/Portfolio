<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAGARAN Home</title>
    <!-- Favicon (Logo) -->
    <link rel="icon" type="image/png" href="https://lh3.googleusercontent.com/pw/AP1GczPmjoIECTGEfcWkaRlF8HQMVrke6cR-uwCwPh2fKQ1udF_S9AKbrBYddkdrKIvePmjo-WjpcVIaH6ydMkgkyicUcG_WFTYq3RuB0Rw8VEyBvcxkWmOqAt8POWdC1q_MdHKg9_p7evmf23hJWsNU4V9_=w919-h919-s-no-gm?authuser=0">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- YouTube IFrame Player API -->
    <script async src="https://www.youtube.com/iframe_api"></script>

    <style>
        /* Base Styles for Dark Theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #f1f5f9; /* Slate 100 */
        }
        
        /* --- Navigation Styles --- */
        .nav-link.active {
            font-weight: 700;
            color: #38bdf8; /* Sky 400 */
            border-bottom: 2px solid #38bdf8;
        }
        
        /* Description Card (Theme-related style kept) */
        .description-card {
            background-color: #1e293b; /* Slate 800 */
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            line-height: 1.6;
        }

        /* --- Custom 3D Showreel Carousel Styles --- */
        .carousel-wrapper {
            position: relative;
            height: 240px; /* Mobile height */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            width: 100%;
            perspective: 1000px;
        }
        @media (min-width: 768px) {
            .carousel-wrapper {
                height: 350px; /* Desktop height */
            }
        }
        
        .c-card {
            position: absolute;
            /* width and height relative to the wrapper */
            width: 75%; /* More videos visible on side */
            height: 180px;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            /* Smooth transition for movement, size, and opacity */
            transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1); 
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #000;
        }
        @media (min-width: 768px) {
            .c-card {
                width: 55%; 
                height: 260px;
            }
        }

        /* Carousel Positions */
        /* Middle (Active) Item: Big and Prominent */
        .c-center {
            z-index: 30;
            transform: translateX(0) scale(1.15); 
            opacity: 1;
            border: 4px solid #38bdf8; /* Sky 400 accent */
            box-shadow: 0 20px 50px rgba(56, 189, 248, 0.4); 
        }
        
        /* Left Item: Smaller, less opaque */
        .c-left {
            z-index: 20;
            transform: translateX(-40%) scale(0.85); 
            opacity: 0.6;
            filter: grayscale(50%);
        }
        
        /* Right Item: Smaller, less opaque */
        .c-right {
            z-index: 20;
            transform: translateX(40%) scale(0.85); 
            opacity: 0.6;
            filter: grayscale(50%);
        }
        
        /* Hidden Items (Out of view) */
        .c-hidden-left {
            z-index: 10;
            transform: translateX(-150%) scale(0.6);
            opacity: 0;
            pointer-events: none;
        }
        .c-hidden-right {
            z-index: 10;
            transform: translateX(150%) scale(0.6);
            opacity: 0;
            pointer-events: none;
        }

        /* Play Icon Overlay */
        .play-overlay {
            background: rgba(56, 189, 248, 0.85); 
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: scale(0.8);
        }
        .c-center:hover .play-overlay {
            transform: scale(1.1);
            opacity: 1;
        }
        .c-center .play-overlay {
            opacity: 1;
            transform: scale(1);
        }
        .c-card:not(.c-center) .play-overlay {
            opacity: 0;
        }

        /* Modal Styles */
        .video-modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .video-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        .modal-content {
            width: 90%;
            max-width: 900px;
            aspect-ratio: 16/9;
            background: black;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        .close-modal {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        
        /* --- General Layout & Text Colors --- */
        .text-gray-700 { color: #cbd5e1; /* Slate 300 */ }
        .text-gray-800 { color: #f1f5f9; /* Slate 100 */ }
        .text-gray-500 { color: #94a3b8; /* Slate 400 */ }
        .bg-white { background-color: #1e293b; }
        .shadow-xl { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3), 0 4px 6px -2px rgba(0,0,0,0.1); }
        .border-t { border-color: #334155; } /* Slate 700 */

        /* Profile Image Style */
        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #38bdf8;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.6);
            margin-bottom: 1.5rem;
        }
        @media (min-width: 768px) {
            .profile-pic {
                width: 160px;
                height: 160px;
            }
        }
        
    </style>
</head>
<body class="min-h-screen">

    <!-- Header - Simplified for JAGARAN style -->
    <header class="w-full flex justify-center sticky top-0 z-50 bg-slate-900 shadow-xl border-b border-sky-500/30">
        <div class="container mx-auto px-4 md:px-8 flex justify-between items-center py-4 md:py-6">
            
            <!-- Left Group -->
            <div class="flex items-center">
                <div class="text-3xl font-extrabold text-sky-400 tracking-wider">
                    <a href="index.html">JAGARAN</a>
                </div>
            </div>
            
            <!-- Right Group - Simplified Navigation -->
            <nav class="flex space-x-4 font-semibold">
                <a href="#" class="nav-link active text-slate-400 hover:text-sky-400 text-sm md:text-base px-2 py-1 transition duration-300">Home</a>
                <a href="playlist.html" class="nav-link text-slate-400 hover:text-sky-400 text-sm md:text-base px-2 py-1 transition duration-300">Playlist</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div id="app-content" class="container mx-auto p-4 md:p-8 pt-8">

        <!-- NEW VIDEO EDITING BANNER (Updated to be fully English) -->
        <section id="hero-banner" class="bg-gradient-to-r from-blue-900/50 to-slate-800 border border-sky-600/50 p-8 md:p-16 rounded-xl shadow-2xl mb-12 text-center">
             <div class="flex flex-col items-center justify-center">
                
                <!-- Profile Image -->
                <img src="uploaded:My CV.jpg-75992c5e-e47f-4a32-9c15-c801c63f396f" alt="Rakibul Malithya Profile Picture" class="profile-pic">
                
                <h1 class="text-4xl md:text-6xl font-extrabold mb-2 leading-tight text-white">Rakibul Malithya</h1>
                <p class="text-xl md:text-3xl font-semibold mb-4 text-sky-300 max-w-4xl mx-auto">
                    Video Editor & Visual Storyteller
                </p>
                <p class="text-lg text-slate-400 max-w-3xl mx-auto italic">
                    "Transforming raw footage into compelling stories with creativity and precision."
                </p>
            </div>
        </section>
        <!-- END NEW VIDEO EDITING BANNER -->


        <!-- SHOWREEL CAROUSEL SECTION -->
        <section id="playlist-section" class="py-10 px-4 sm:px-8 bg-slate-800 rounded-xl shadow-xl max-w-6xl mx-auto overflow-hidden border border-slate-700">
            <h2 class="text-3xl font-bold text-sky-400 mb-8 text-center">Featured Video Playlists</h2>
            
            <!-- Carousel Container -->
            <div id="custom-carousel" class="carousel-wrapper">
                <div class="text-center text-slate-400">Loading Videos... (Please ensure the YouTube API is allowed to fetch data)</div>
            </div>
        </section>
        
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <div class="close-modal" onclick="closeVideoModal()">&times;</div>
            <div id="modalPlayerContainer" class="w-full h-full"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 text-center py-6 mt-12 border-t border-sky-500/30">
        <p class="text-sm">Â© 2025 JAGARAN | All rights reserved.</p>
    </footer>

    <script>
        // Your playlist ID
        const PLAYLIST_ID = "PL9MX68d9XxCeoK8gVDDlHv3eBVOkwz2Oi"; 
        
        let dataPlayer; // Hidden player to fetch data
        let modalPlayer; // Player inside modal
        let carouselInterval;
        let playlistVideoIds = [];
        let currentIndex = 0;
        
        // --- API Ready ---
        window.onYouTubeIframeAPIReady = function() {
            // Initialize a dummy player to fetch playlist data
            const dummyDiv = document.createElement('div');
            dummyDiv.id = 'dummyPlayer';
            dummyDiv.style.display = 'none';
            document.body.appendChild(dummyDiv);

            dataPlayer = new YT.Player('dummyPlayer', {
                height: '0',
                width: '0',
                playerVars: {
                    'listType': 'playlist',
                    'list': PLAYLIST_ID
                },
                events: {
                    'onReady': onDataPlayerReady,
                    // Error handling if data fails to load
                    'onError': (e) => {
                        console.error("YouTube Player Error:", e.data);
                        document.getElementById('custom-carousel').innerHTML = '<p class="text-red-400">Error loading playlist data. Check console for details or playlist ID.</p>';
                    }
                }
            });
        }

        function onDataPlayerReady(event) {
            // Wait briefly to ensure playlist data is available
            setTimeout(() => {
                const rawIds = dataPlayer.getPlaylist();
                if (rawIds && rawIds.length > 0) {
                    // Store the playlist video IDs
                    playlistVideoIds = [...rawIds]; 
                    console.log(`Found ${playlistVideoIds.length} videos in the playlist.`);
                    buildCarousel(playlistVideoIds);
                } else {
                    document.getElementById('custom-carousel').innerHTML = '<p class="text-red-400">No videos found in the playlist. Please check the PLAYLIST_ID or try again.</p>';
                }
                // Destroy the dummy player after data fetching
                dataPlayer.destroy();
            }, 1500); // 1.5 seconds delay
        }

        // --- Carousel Logic ---
        function buildCarousel(ids) {
            const container = document.getElementById('custom-carousel');
            container.innerHTML = ''; // Clear "Loading" text

            // Create a card for each video
            ids.forEach((id, index) => {
                const card = document.createElement('div');
                card.className = 'c-card';
                card.id = `card-${index}`;
                // Use YouTube thumbnail (hqdefault)
                card.style.backgroundImage = `url('https://i.ytimg.com/vi/${id}/hqdefault.jpg')`;
                
                // Play icon overlay
                const playIcon = document.createElement('div');
                playIcon.className = 'play-overlay';
                playIcon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>';
                card.appendChild(playIcon);

                // Click event handling
                card.onclick = () => {
                    // Determine the relative position of the clicked card
                    let clickedIndex = index;
                    let total = ids.length;
                    let steps = (clickedIndex - currentIndex + total) % total;
                    
                    // If center card is clicked, open the video modal
                    if (steps === 0) {
                        openVideoModal(id);
                    } else {
                        // If side card is clicked, rotate the carousel
                        if (steps === 1) { // Right card clicked
                            currentIndex = (currentIndex + 1) % total;
                        } else if (steps === total - 1) { // Left card clicked
                            currentIndex = (currentIndex - 1 + total) % total;
                        } else {
                            // Ignore clicks on hidden cards
                            return;
                        }
                        
                        updateCarouselView();
                        // Reset auto loop after manual move
                        clearInterval(carouselInterval);
                        startLoop();
                    }
                };

                container.appendChild(card);
            });

            updateCarouselView();
            startLoop();
        }

        function updateCarouselView() {
            const total = playlistVideoIds.length;
            if (total === 0) return;

            playlistVideoIds.forEach((id, i) => {
                const card = document.getElementById(`card-${i}`);
                if (!card) return;

                // Reset and apply new position classes
                card.className = 'c-card';

                // Calculate relative position based on circular array
                let diff = (i - currentIndex + total) % total; 
                
                if (diff === 0) {
                    card.classList.add('c-center');
                } else if (diff === 1) {
                    card.classList.add('c-right');
                } else if (diff === total - 1) {
                    card.classList.add('c-left');
                } else {
                    // Hidden items
                    if (diff < total / 2) {
                        card.classList.add('c-hidden-right');
                    } else {
                        card.classList.add('c-hidden-left');
                    }
                }
            });
        }

        // Automatic carousel rotation (5 seconds)
        function startLoop() {
            if (carouselInterval) clearInterval(carouselInterval);
            carouselInterval = setInterval(() => {
                // Move one step to the right
                currentIndex = (currentIndex + 1) % playlistVideoIds.length;
                updateCarouselView();
            }, 5000); 
        }

        function stopLoop() {
            if (carouselInterval) clearInterval(carouselInterval);
        }

        // --- Modal Player Logic ---
        function openVideoModal(videoId) {
            stopLoop(); // Pause carousel while video is playing
            const modal = document.getElementById('videoModal');
            modal.classList.add('active');

            if (modalPlayer) {
                // If player exists, just load and play the new video
                modalPlayer.loadVideoById(videoId, 0); 
            } else {
                // Initialize player for the first time
                modalPlayer = new YT.Player('modalPlayerContainer', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: {
                        'autoplay': 1,
                        'rel': 0, 
                        'modestbranding': 1, 
                        'controls': 1 
                    }
                });
            }
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            modal.classList.remove('active');
            if (modalPlayer && typeof modalPlayer.stopVideo === 'function') {
                modalPlayer.stopVideo(); // Stop video playback
            }
            startLoop(); // Resume carousel rotation
        }

        // Global Initialization
        window.addEventListener('load', () => {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });

        // Close modal on outside click
        document.getElementById('videoModal').addEventListener('click', (e) => {
            if (e.target.id === 'videoModal') closeVideoModal();
        });

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
    </script>
</body>
</html>
